!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.EventEmitter=t():e.EventEmitter=t()}(self,(()=>(()=>{"use strict";var e={987:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s,i,r=!1){Object.defineProperty(this,"isStack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.isStack=r,this.events=s,this.listeners=i,this._name=e,this.handlers={callback:t,emit:[],remove:[]},this.push(this)}push(e){this._name&&!this.events[this._name]&&(this.events[this._name]=[]),this.events[this._name].push(e),this.listeners.push(e)}get name(){return"string"==typeof this._name?this._name:void 0}emit(e){"function"==typeof this.handlers.callback&&(this.handlers.callback(e),this.handlers.emit.forEach((e=>e())))}hasHandler(e){return e===this.handlers.callback}remove(){this&&this.events&&this._name&&this.events[this._name]&&(this.events[this._name]=this.events[this._name].filter((e=>e!==this)),this.listeners=this.listeners.filter((e=>e!==this)),this.isStack||(this._name=void 0,this.handlers.callback=void 0),this.handlers.remove.forEach((e=>e())))}onEmit(e){this.handlers.emit.splice(0,1,e)}onRemove(e){this.handlers.remove.splice(0,1,e)}}},518:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(987));class n{constructor(e){Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.listeners=[],this.events={},this.emit=this.emit.bind(this),this.addListener=this.addListener.bind(this),this.removeAllListeners=this.removeAllListeners.bind(this),"boolean"==typeof e&&!0===e?this.events=n._events[n.globalName]:"string"==typeof e&&e!==n.globalName&&(n._events[e]||(n._events[e]={}),this.events=n._events[e])}emit(e,t){this.events[e]&&this.events[e].forEach((e=>{e.emit(t)}))}addListener(e,t){return new r.default(e,t,this.events,this.listeners)}removeListener(e){this.listeners.reverse().forEach((t=>{t.hasHandler(e)&&t.remove()}))}removeAllListeners(){this.listeners.reverse().forEach((e=>{e.remove()}))}}Object.defineProperty(n,"globalName",{enumerable:!0,configurable:!0,writable:!0,value:"__global"}),Object.defineProperty(n,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{[n.globalName]:{}}}),t.default=n},457:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(987));class n extends r.default{constructor(e=[]){const t=[];super("__stack",(e=>{t.forEach((t=>t!==this?t.emit(e):null))}),{},t,!0),e.forEach((e=>this.push(e)))}push(e){super.push(e)}remove(e){this&&this.events&&this._name&&this.events[this._name]&&(this.events[this._name]=this.events[this._name].filter((t=>e?t!==e:t!==this)),this.listeners=this.listeners.filter((t=>e?t!==e||(t.remove(),!1):(t!==this&&t.remove(),t!==this))),e||super.remove())}get length(){return Number(this.listeners.length-1)}}t.default=n},607:function(e,t,s){var i,r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(518)),a=r(s(457));class l extends n.default{}i=l,Object.defineProperty(l,"instance",{enumerable:!0,configurable:!0,writable:!0,value:new l(!0)}),Object.defineProperty(l,"emit",{enumerable:!0,configurable:!0,writable:!0,value:i.instance.emit}),Object.defineProperty(l,"addListener",{enumerable:!0,configurable:!0,writable:!0,value:i.instance.addListener}),Object.defineProperty(l,"removeListener",{enumerable:!0,configurable:!0,writable:!0,value:i.instance.removeListener}),Object.defineProperty(l,"removeAllListeners",{enumerable:!0,configurable:!0,writable:!0,value:i.instance.removeAllListeners}),Object.defineProperty(l,"Stack",{enumerable:!0,configurable:!0,writable:!0,value:a.default}),t.default=l}},t={};return function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}(607)})()));
//# sourceMappingURL=index.js.map